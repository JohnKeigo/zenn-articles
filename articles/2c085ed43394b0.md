---
title: "stable-diffusion-webui-docker を使ってWaifu Diffusionモデル等を使う"
emoji: "⛳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [stable diffusion]
published: false
---

ローカル環境を汚さずに作業するのに良いツールがDockerのコンテナで実行する事です。
ものすごいスピードでFork版が開発され続けるStable Diffusionのweb-uiをDocker Container上で使えるようにまとめてくれた人がいます。
4GB GPU VRAMのサポートもありStable Diffusion等を簡単にUIから使いたい方は
これを使わせて貰うと大体のゲーミングPCやGPU付きのWindowsノートPCでも動かせる様なので良いかと思います。

https://github.com/AbdBarho/stable-diffusion-webui-docker

# 1 Setupページにしたがって進めます
https://github.com/AbdBarho/stable-diffusion-webui-docker/wiki/Setup

最初にリポジトリをクローンしておきます
```js
$ git clone https://github.com/AbdBarho/stable-diffusion-webui-docker.git
Cloning into 'stable-diffusion-webui-docker'...
remote: Enumerating objects: 434, done.
remote: Counting objects: 100% (161/161), done.
remote: Compressing objects: 100% (65/65), done.
remote: Total 434 (delta 139), reused 96 (delta 96), pack-reused 273
Receiving objects: 100% (434/434), 83.40 KiB | 20.85 MiB/s, done.
Resolving deltas: 100% (220/220), done.

$ cd stable-diffusion-webui-docker
```

# 2 docker compose で環境をビルドします
※ --profile [ui] はautoで指定しました。

```js
docker compose --profile download up --build
# wait until its done, then:
docker compose --profile [ui] up --build
# where [ui] is one of: auto | auto-cpu | hlky | lstein
```

# 3　最終的にmodelをロードしてlocal URLで提供されるのでアクセスする事でWeb UIが開きます

```js
webui-docker-automatic1111-1  | Loading weights [7460a6fa] from /cache/models/model.ckpt
webui-docker-automatic1111-1  | Global Step: 470000
webui-docker-automatic1111-1  | Model loaded.
webui-docker-automatic1111-1  | Running on local URL:  http://0.0.0.0:7860
webui-docker-automatic1111-1  | 
webui-docker-automatic1111-1  | To create a public link, set `share=True` in `launch()`.
```
docker container も動いてますね
```js
$ docker ps -a
CONTAINER ID   IMAGE                                                  COMMAND                  CREATED          STATUS                      PORTS                    NAMES
398a3624c24d   webui-docker_download                                  "/docker/download.sh"    25 minutes ago   Exited (0) 21 minutes ago                            webui-docker-download-1
```

# Thanks
thanks to everyone behind these awesome projects, 
First I would like to contribute the project by introducing best environment run with the user PC environment.
And I will contribute the democratized AI through this activity.

AbdBarho/stable-diffusion-webui-docker#thanks
hlky/stable-diffusion-webui
AUTOMATIC1111/stable-diffusion-webui
lstein/stable-diffusion
CompVis/stable-diffusion
hlky/sd-enable-textual-inversion
devilismyfriend/latent-diffusion
Hafiidz/latent-diffusion