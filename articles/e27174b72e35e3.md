---
title: "Windowsã§çœã‚¨ãƒvramã§Waifu Diffusionã‚’å®Ÿè¡Œã™ã‚‹"
emoji: "ğŸƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
Windowsç’°å¢ƒã§AUTOMATIC1111æ°ã®ãƒªãƒã‚¸ãƒˆãƒªã®ç’°å¢ƒæ•´å‚™ã‚’é€²ã‚ã‚‹
https://github.com/AUTOMATIC1111/stable-diffusion-webui



â–¼å®Ÿè¡Œç’°å¢ƒ
Edition	Windows 11 Pro
Version	21H2
OS build	22000.1098
Experience	Windows Feature Experience Pack 1000.22000.1098.0


# 1 ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ãŠã
å‰å›è¨˜äº‹åŒæ§˜ã«å‰ææ¡ä»¶ã¨ã—ã¦Ubuntuã§é©å½“ãªgitç”¨ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã¯cloneã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚

```js
> git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
```

ã‚ã¨hugging faceã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’models/stable-diffusionãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«ç½®ã„ã¦ãŠãã¾ã™ã€‚
ç§ã¯Waifu Diffusion v1.3 ã®float16ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚

â–½ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯ç¢ºã‹ã“ã“ã‹ã‚‰
https://huggingface.co/hakurei/waifu-diffusion-v1-3/blob/main/wd-v1-3-float16.ckpt

```js
â”œâ”€â”€â”€Stable-diffusion
â”‚       Put Stable Diffusion checkpoints here.txt
â”‚       wd-v1-3-float16.ckpt
```

# 2 ç§ã®å ´åˆã¯Pythonç’°å¢ƒã‚’ã‚ã‚Œã“ã‚Œæ•´å‚™ã™ã‚‹ã®ã¯Anacondaã§ä»®æƒ³ç’°å¢ƒä½œã£ã¦ã„ã‚‹ã®ã§Windowsç‰ˆAnaconda Navigatorã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
https://www.anaconda.com/products/distribution

# 3 Anaconda PowerShell Promptã‚’èµ·å‹•ã™ã‚‹
Anaconda PowerShell Promptã¯Anaconda Navigatorã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹ã¨æ€ã„ã¾ã™ã€‚

ã‚‚ã—WebUIã‚’å‹•ã‹ã™ã¨ãã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¶³ã‚Šãªã„æ„Ÿã˜ã§ã—ãŸã‚‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸€é€šã‚ŠAnacondaç’°å¢ƒã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã¨å‹•ãã‹ã¨æ€ã„ã¾ã™ã€‚
```js
> pip install -r requirements.txt
```

# 4 webui.batã‚’å®Ÿè¡Œ
```js
> cd stable-diffusion-webui
> ./webui.bat
venv "C:\Users\keigo\git\stable-diffusion-webui\venv\Scripts\Python.exe"
Python 3.9.12 (main, Apr  4 2022, 05:22:27) [MSC v.1916 64 bit (AMD64)]
Commit hash: 1fbfc052eb529d8cf8ce5baf578bcf93d0280c29
Installing requirements for Web UI
Launching Web UI with arguments:
LatentDiffusion: Running in eps-prediction mode
DiffusionWrapper has 859.52 M params.
making attention of type 'vanilla' with 512 in_channels
Working with z of shape (1, 4, 32, 32) = 4096 dimensions.
making attention of type 'vanilla' with 512 in_channels
Loading weights [84692140] from C:\Users\keigo\git\stable-diffusion-webui\models\Stable-diffusion\wd-v1-3-float16.ckpt
Global Step: 683410
Applying cross attention optimization (Doggettx).
Model loaded.
Loaded a total of 0 textual inversion embeddings.
Embeddings:
Running on local URL:  http://127.0.0.1:7860

To create a public link, set `share=True` in `launch()`.

```

# 5 http://127.0.0.1:7860 ã§ã‚µãƒ¼ãƒ“ã‚¹ãŒå‹•ãã®ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥ã‚Œã¦æç”»ã—ã¾ã™
![](https://storage.googleapis.com/zenn-user-upload/12ebf42e4d0f-20221106.png)

# 6 æç”»ä¸­ã®vramã¯4.3GBä½ã®æ¶ˆè²»ã§ã—ãŸ
![](https://storage.googleapis.com/zenn-user-upload/ba6e9d06f59d-20221106.png)